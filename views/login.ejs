<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>web app</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.7/css/bootstrap-dialog.min.css">



    <style>


    </style>
</head>



<body>





  <div id="myModal" class="modal fade">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                  <h4 class="modal-title">ERROR!!</h4>
              </div>
              <div class="modal-body">

                  <p class="text-warning"><small>Username is wrong</small></p>
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

              </div>
          </div>
      </div>
  </div>





<div class="container">
  <div class="col-lg-4"></div>


  <div class="col-lg-4">
    <div class="jumbotron text-center" style="margin-top: 40%;">
      <h3>Login</h3>
        <form>
                <div class="form-group">

                <input type="text"  id="login_name" class="form-control" placeholder="Username" name="uname" required>

                </div>

                <div class="form-group">

                  <input type="text" class="form-control" placeholder="Password" name="uname" required>

                </div>

                <div>
                <button id="sign_in" class="btn btn-primary form-control">sign in</button>
                </div>

                <div>
                                      <!-- <button id="login_lost_btn" type="button" class="btn btn-link">Lost Password?</button> -->
                <button id="login_register_btn" type="button" class="btn btn-link" style="float: right;">Register</button>
                </div>
        </form>

      </div>
  </div>

    <div class="col-lg-4"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap3-dialog/1.34.7/js/bootstrap-dialog.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script type="text/javascript">




        $(document).ready(function(){

          $("#login_register_btn").click(function(){

            $.ajax({
              type: 'GET',
              url: '/register',
              success: function(data){
                //do something with the data via front-end framework
                //location.reload();
                //renderHtml(data);

                window.location.pathname="/register"
              }
            });

            return false;
          });


////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  //html navigation

    $("#sign_in").click(function(){

      //alert($("#login_name").val());

      localStorage.setItem("login_name", $("#login_name").val());

      var email=$("#login_name").val();

      var obj = {email:email};

      $.ajax({
        type: 'POST',
        url: '/check_for_username_login',
        data: obj,
        success: function(data){
          //do something with the data via front-end framework
          //location.reload();
          //renderHtml(data);
          console.log("inside sign in call back");
          console.log(data);

          if(data.length==1)
          {
              window.location.pathname="/home"
          }
          else
          {
            //alert("give proper user name");

            $("#myModal").modal('show');
          }


        }
      });

      return false;
      });








//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////




          // $("#login_register_btn").click(function(){
          //
          //
          //
          //
          // //  alert("1");
          //
          //   $.ajax({
          //     type: 'POST',
          //     url: '/register',
          //     data: 'register',
          //     success: function(data){
          //       //do something with the data via front-end framework
          //     //  location.reload();
          //     }
          //   });
          //
          //   return false;
          // });




        });

    </script>





</body>
</html>
